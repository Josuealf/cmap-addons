<?xml version="1.0" encoding="UTF-8"?>

<odoo>
    <data>

        <!-- explicit form view definition -->
        <record model="ir.ui.view" id="oficio_enviado_form_view">
            <field name="name">oficio_enviado.form</field>
            <field name="model">cmap.oficio_enviado</field>
            <field name="arch" type="xml">
                <form string="Oficios Enviados Form">
                    <header>
                        <button name="set_cancelado_progressbar" string="Cancelar" type="object" 
                                class="oe_highlight" attrs="{'invisible': ['!', ('status', '=', 'en_espera')]}"/>
                        <button name="set_enviado_progressbar" string="Enviar" type="object" 
                                class="oe_highlight" attrs="{'invisible': ['!', ('status', '=', 'en_espera')]}"/>
                        <button name="set_recibido_progressbar" string="Marcar como recibido" type="object" 
                                class="oe_highlight" attrs="{'invisible': ['!', ('status', '=', 'enviado')]}"/>
                        <field name="status" widget="statusbar" statusbar_visible="en_espera,enviado,recibido"/>
                    </header>
                    <sheet>
                        <group>
                            <group>
                                <field name="id_id"/>
                                <field name="dependencia_id"/>
                                <field name="correlativo"/>
                                <field name="destinatario_id"/>
                                <field name="asunto"/>
                            </group>
                            <group>
                                <field name="fecha"/>
                                <field name="archivo_img"/>
                            </group>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <!-- explicit tree view definition -->
        <record model="ir.ui.view" id="oficio_enviado_tree_view">
            <field name="name">oficio_enviado.list</field>
            <field name="model">cmap.oficio_enviado</field>
            <field name="arch" type="xml">
                <tree string="Oficios Enviados Tree">
                    <field name="id_id"/>
                    <field name="dependencia_id"/>
                    <field name="correlativo"/>
                    <field name="destinatario_id"/>
                    <field name="asunto"/>
                    <field name="fecha"/>
                    <field name="status"/>
                </tree>
            </field>
        </record>

        <!-- explicit search view definition -->
        <record model="ir.ui.view" id="oficio_enviado_search_view">
            <field name="name">oficio_enviado.search</field>
            <field name="model">cmap.oficio_enviado</field>
            <field name="arch" type="xml">
                <search>
                    <field name="dependencia_id"/>
                    <filter name="only_dc" string="DC"
                            domain="[('dependencia_id', '=', 'Despacho del Contralor')]"/>
                    <filter name="only_das" string="DAS"
                            domain="[('dependencia_id', '=', 'Direccion de Administracion y Servicios')]"/>
                    <filter name="only_drh" string="DRH"
                            domain="[('dependencia_id', '=', 'Direccion de Recursos Humanos')]"/>
                    <filter name="only_dcp" string="DCP"
                            domain="[('dependencia_id', '=', 'Direccion de Control Posterior')]"/>
                    <field name="correlativo"/>
                    <field name="asunto" filter_domain="[('asunto', 'ilike', self)]"/>
                    <field name="fecha"/>
                    <field name="status"/>
                    <group string="Group By">
                        <filter name="by_id" string="ID"
                                context="{'group_by': 'id_id'}"/>
                    </group>
                </search>
            </field>
        </record>

        <!-- explicit calendar view definition -->
        <record model="ir.ui.view" id="oficio_enviado_calendar_view">
            <field name="name">oficio_enviado.calendar</field>
            <field name="model">cmap.oficio_enviado</field>
            <field name="arch" type="xml">
                <calendar string="Oficios Enviados Calendar" date_start="fecha">
                    <field name="id_id"/>
                    <field name="dependencia_id"/>
                    <field name="correlativo"/>
                    <field name="destinatario_id"/>
                    <field name="status"/>
                </calendar>
            </field>
        </record>

        <!-- actions opening views on models -->
        <record model="ir.actions.act_window" id="oficio_enviado_action_window">
            <field name="name">Oficios Enviados</field>
            <field name="res_model">cmap.oficio_enviado</field>
            <field name="view_mode">tree,form,search,calendar</field>
            <field name="context" eval="{'search_default_by_id': 1}"/>
        </record>

        <!-- Top menu item -->
        <menuitem name="Control Correspondencias" id="control_correspondencias_menu_root"/>

        <!-- menu categories -->
        <menuitem name="Oficios" id="control_correspondencias_oficios" parent="control_correspondencias_menu_root"/>

        <!-- sub-menu categories -->
        <menuitem name="Enviados" id="control_correspondencias_oficio_enviado" parent="control_correspondencias_oficios"
                  action="oficio_enviado_action_window"/>

    </data>
</odoo>